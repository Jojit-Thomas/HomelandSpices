<div class="container-fluid">
  <div class="container">
    {{#with address}}
    <form action="" id="checkout-form" method="post" class="loginBox">
      <div class="d-flex">
        <input
          required
          type="text"
          class="w-100 p-2 m-2 form-control"
          name="name"
          placeholder="Name"
          value="{{name}}"
        />
        <input
          required
          type="number"
          class="w-100 p-2 m-2 form-control"
          name="phone"
          placeholder="Phone"
          value="{{phone}}"
        />
      </div>
      <div class="d-flex">
        <input
          required
          type="number"
          class="w-100 p-2 m-2 form-control"
          name="pincode"
          placeholder="Pin Code"
          value="{{pincode}}"
        />
        <input
          required
          type="text"
          class="w-100 p-2 m-2 form-control"
          name="locality"
          placeholder="Locality"
          value="{{locality}}"
        />
      </div>
      <div class="d-flex">
        <select class="form-select w-100 p-2 m-2" name="State">
          <option selected value="{{state}}">{{state}}</option>
          <option value="Kerala">Kerala</option>
          <option value="Tamil Nadu">Tamil Nadu</option>
        </select>
        <input
          required
          type="text"
          class="w-100 p-2 m-2 form-control"
          name="city"
          placeholder="City"
          value="{{city}}"
        />
      </div>
      <div class="d-flex">
        <input
          required
          type="text"
          class="w-100 p-2 m-2 form-control"
          name="houseName"
          placeholder="House Name"
          value="{{houseName}}"
        />
        <input
          required
          type="text"
          class="w-100 p-2 m-2 form-control"
          name="landmark"
          placeholder="Landmark "
          value="{{landmark}}"
        />
      </div>
      <div class="d-flex">
        <input
          required
          type="text"
          class="w-100 p-2 m-2 form-control"
          name="postOffice"
          placeholder="Post Office"
          value="{{postOffice}}"
        />
      </div>
      <div class="d-flex mt-2">
        <input type="text" id="addressId" hidden value="{{_id}}">
        <input required type="reset" class="btn btn-danger p-2 m-2 w-100" />
        <input
          required
          type="submit"
          value="Save"
          class="btn btn-success p-2 m-2 w-100"
        />
      </div>
    </form>
    {{/with}}
  </div>
</div>

<script>
 $('#checkout-form').submit(function(e) {
  e.preventDefault();
  let addressId = $("#addressId").val()
  $.ajax({
    url: `/address/edit/${addressId}`,
    type: 'POST',
    data: $('#checkout-form').serialize(),
    success: function(data) {
      console.log('success');
      window.location.href = "/address";
    },
    error: function(err) {
      console.log(err);
    }
  })
})
</script>
